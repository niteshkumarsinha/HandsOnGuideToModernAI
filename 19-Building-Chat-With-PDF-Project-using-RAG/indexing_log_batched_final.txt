/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/langchain_core/_api/deprecation.py:26: UserWarning: Core Pydantic V1 functionality isn't compatible with Python 3.14 or greater.
  from pydantic.v1.fields import FieldInfo as FieldInfoV1
Number of chunks to index: 962
Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY.
Creating/Connecting to collection...
Indexing the remaining 961 chunks in batches of 20...
Indexing batch 1/49 (Chunks 1 to 21)...
Indexing batch 2/49 (Chunks 21 to 41)...
Indexing batch 3/49 (Chunks 41 to 61)...
Indexing batch 4/49 (Chunks 61 to 81)...
Indexing batch 5/49 (Chunks 81 to 101)...
Indexing batch 6/49 (Chunks 101 to 121)...
Indexing batch 7/49 (Chunks 121 to 141)...
Indexing batch 8/49 (Chunks 141 to 161)...
Indexing batch 9/49 (Chunks 161 to 181)...
Indexing batch 10/49 (Chunks 181 to 201)...
Indexing batch 11/49 (Chunks 201 to 221)...
Indexing batch 12/49 (Chunks 221 to 241)...
Indexing batch 13/49 (Chunks 241 to 261)...
Indexing batch 14/49 (Chunks 261 to 281)...
Indexing batch 15/49 (Chunks 281 to 301)...
Indexing batch 16/49 (Chunks 301 to 321)...
Indexing batch 17/49 (Chunks 321 to 341)...
Indexing batch 18/49 (Chunks 341 to 361)...
Indexing batch 19/49 (Chunks 361 to 381)...
Indexing batch 20/49 (Chunks 381 to 401)...
Indexing batch 21/49 (Chunks 401 to 421)...
Indexing batch 22/49 (Chunks 421 to 441)...
Indexing batch 23/49 (Chunks 441 to 461)...
Indexing batch 24/49 (Chunks 461 to 481)...
Indexing batch 25/49 (Chunks 481 to 501)...
Indexing batch 26/49 (Chunks 501 to 521)...
Indexing batch 27/49 (Chunks 521 to 541)...
Indexing batch 28/49 (Chunks 541 to 561)...
Indexing batch 29/49 (Chunks 561 to 581)...
Indexing batch 30/49 (Chunks 581 to 601)...
Indexing batch 31/49 (Chunks 601 to 621)...
Indexing batch 32/49 (Chunks 621 to 641)...
Indexing batch 33/49 (Chunks 641 to 661)...
Indexing batch 34/49 (Chunks 661 to 681)...
Indexing batch 35/49 (Chunks 681 to 701)...
Indexing batch 36/49 (Chunks 701 to 721)...
Indexing batch 37/49 (Chunks 721 to 741)...
Indexing batch 38/49 (Chunks 741 to 761)...
Error in batch 741: Error embedding content (RESOURCE_EXHAUSTED): 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/embed_content_free_tier_requests, limit: 1000, model: gemini-embedding-1.0\nPlease retry in 20.548165625s.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/embed_content_free_tier_requests', 'quotaId': 'EmbedContentRequestsPerDayPerUserPerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-embedding-1.0'}, 'quotaValue': '1000'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '20s'}]}}
Waiting 60 seconds before retrying this batch...
Traceback (most recent call last):
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/langchain_google_genai/embeddings.py", line 432, in embed_documents
    result = self.client.models.embed_content(
        model=self.model,
        contents=batch,
        config=config,
    )
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/google/genai/models.py", line 4191, in embed_content
    response = self._api_client.request(
        'post', path, request_dict, http_options
    )
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/google/genai/_api_client.py", line 1386, in request
    response = self._request(http_request, http_options, stream=False)
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/google/genai/_api_client.py", line 1222, in _request
    return self._retry(self._request_once, http_request, stream)  # type: ignore[no-any-return]
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/tenacity/__init__.py", line 420, in exc_check
    raise retry_exc.reraise()
          ~~~~~~~~~~~~~~~~~^^
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/tenacity/__init__.py", line 187, in reraise
    raise self.last_attempt.result()
          ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.14/lib/python3.14/concurrent/futures/_base.py", line 443, in result
    return self.__get_result()
           ~~~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.14/lib/python3.14/concurrent/futures/_base.py", line 395, in __get_result
    raise self._exception
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/google/genai/_api_client.py", line 1199, in _request_once
    errors.APIError.raise_for_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/google/genai/errors.py", line 121, in raise_for_response
    cls.raise_error(response.status_code, response_json, response)
    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/google/genai/errors.py", line 146, in raise_error
    raise ClientError(status_code, response_json, response)
google.genai.errors.ClientError: 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/embed_content_free_tier_requests, limit: 1000, model: gemini-embedding-1.0\nPlease retry in 20.548165625s.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/embed_content_free_tier_requests', 'quotaId': 'EmbedContentRequestsPerDayPerUserPerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-embedding-1.0'}, 'quotaValue': '1000'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '20s'}]}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/19-Building-Chat-With-PDF-Project-using-RAG/index.py", line 46, in <module>
    vector_store.add_documents(batch)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/langchain_core/vectorstores/base.py", line 257, in add_documents
    return self.add_texts(texts, metadatas, **kwargs)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/langchain_qdrant/qdrant.py", line 510, in add_texts
    for batch_ids, points in self._generate_batches(
                             ~~~~~~~~~~~~~~~~~~~~~~^
        texts, metadatas, ids, batch_size
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ):
    ^
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/langchain_qdrant/qdrant.py", line 1060, in _generate_batches
    self._build_vectors(batch_texts),
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/langchain_qdrant/qdrant.py", line 1104, in _build_vectors
    batch_embeddings = embeddings.embed_documents(list(texts))
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/langchain_google_genai/embeddings.py", line 439, in embed_documents
    raise GoogleGenerativeAIError(msg) from e
langchain_google_genai._common.GoogleGenerativeAIError: Error embedding content (RESOURCE_EXHAUSTED): 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/embed_content_free_tier_requests, limit: 1000, model: gemini-embedding-1.0\nPlease retry in 20.548165625s.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/embed_content_free_tier_requests', 'quotaId': 'EmbedContentRequestsPerDayPerUserPerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-embedding-1.0'}, 'quotaValue': '1000'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '20s'}]}}

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/langchain_google_genai/embeddings.py", line 432, in embed_documents
    result = self.client.models.embed_content(
        model=self.model,
        contents=batch,
        config=config,
    )
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/google/genai/models.py", line 4191, in embed_content
    response = self._api_client.request(
        'post', path, request_dict, http_options
    )
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/google/genai/_api_client.py", line 1386, in request
    response = self._request(http_request, http_options, stream=False)
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/google/genai/_api_client.py", line 1222, in _request
    return self._retry(self._request_once, http_request, stream)  # type: ignore[no-any-return]
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/tenacity/__init__.py", line 420, in exc_check
    raise retry_exc.reraise()
          ~~~~~~~~~~~~~~~~~^^
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/tenacity/__init__.py", line 187, in reraise
    raise self.last_attempt.result()
          ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.14/lib/python3.14/concurrent/futures/_base.py", line 443, in result
    return self.__get_result()
           ~~~~~~~~~~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.14/lib/python3.14/concurrent/futures/_base.py", line 395, in __get_result
    raise self._exception
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/google/genai/_api_client.py", line 1199, in _request_once
    errors.APIError.raise_for_response(response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/google/genai/errors.py", line 121, in raise_for_response
    cls.raise_error(response.status_code, response_json, response)
    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/google/genai/errors.py", line 146, in raise_error
    raise ClientError(status_code, response_json, response)
google.genai.errors.ClientError: 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/embed_content_free_tier_requests, limit: 1000, model: gemini-embedding-1.0\nPlease retry in 19.60567759s.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/embed_content_free_tier_requests', 'quotaId': 'EmbedContentRequestsPerDayPerUserPerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-embedding-1.0'}, 'quotaValue': '1000'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '19s'}]}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/19-Building-Chat-With-PDF-Project-using-RAG/index.py", line 51, in <module>
    vector_store.add_documents(batch)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/langchain_core/vectorstores/base.py", line 257, in add_documents
    return self.add_texts(texts, metadatas, **kwargs)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/langchain_qdrant/qdrant.py", line 510, in add_texts
    for batch_ids, points in self._generate_batches(
                             ~~~~~~~~~~~~~~~~~~~~~~^
        texts, metadatas, ids, batch_size
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ):
    ^
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/langchain_qdrant/qdrant.py", line 1060, in _generate_batches
    self._build_vectors(batch_texts),
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/langchain_qdrant/qdrant.py", line 1104, in _build_vectors
    batch_embeddings = embeddings.embed_documents(list(texts))
  File "/Volumes/Data/Python/Hands-On-Guide-To-Modern-AI/.venv/lib/python3.14/site-packages/langchain_google_genai/embeddings.py", line 439, in embed_documents
    raise GoogleGenerativeAIError(msg) from e
langchain_google_genai._common.GoogleGenerativeAIError: Error embedding content (RESOURCE_EXHAUSTED): 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/embed_content_free_tier_requests, limit: 1000, model: gemini-embedding-1.0\nPlease retry in 19.60567759s.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/embed_content_free_tier_requests', 'quotaId': 'EmbedContentRequestsPerDayPerUserPerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-embedding-1.0'}, 'quotaValue': '1000'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '19s'}]}}
